<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the drawAtlas method from the Canvas class, for the Dart programming language.">
  <title>drawAtlas method - Canvas class - dart:ui library - Dart API</title>

  
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500,400i,400,300|Source+Sans+Pro:400,300,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../../static-assets/github.css">
  <link rel="stylesheet" href="../../static-assets/styles.css">
  <link rel="icon" href="../../static-assets/favicon.png">

</head>

<body data-base-href="../../"
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">provinciApp</a></li>
    <li><a href="../../dart-ui/dart-ui-library.html">dart:ui</a></li>
    <li><a href="../../dart-ui/Canvas-class.html">Canvas</a></li>
    <li class="self-crumb">drawAtlas method</li>
  </ol>
  <div class="self-name">drawAtlas</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>

  <div id="dartdoc-sidebar-left" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
      <form class="search-sidebar" role="search">
        <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
      </form>
    </header>
    
    <ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
      <li><a href="../../index.html">provinciApp</a></li>
      <li><a href="../../dart-ui/dart-ui-library.html">dart:ui</a></li>
      <li><a href="../../dart-ui/Canvas-class.html">Canvas</a></li>
      <li class="self-crumb">drawAtlas method</li>
    </ol>
    
    <h5>Canvas class</h5>
    <ol>
    
        <li class="section-title"><a href="../../dart-ui/Canvas-class.html#constructors">Constructors</a></li>
        <li><a href="../../dart-ui/Canvas/Canvas.html">Canvas</a></li>
    
        <li class="section-title inherited">
            <a href="../../dart-ui/Canvas-class.html#instance-properties">Properties</a>
        </li>
        <li class="inherited"><a href="../../dart-core/Object/hashCode.html">hashCode</a></li>
        <li class="inherited"><a href="../../dart-core/Object/runtimeType.html">runtimeType</a></li>
    
        <li class="section-title"><a href="../../dart-ui/Canvas-class.html#instance-methods">Methods</a></li>
        <li><a href="../../dart-ui/Canvas/clipPath.html">clipPath</a></li>
        <li><a href="../../dart-ui/Canvas/clipRect.html">clipRect</a></li>
        <li><a href="../../dart-ui/Canvas/clipRRect.html">clipRRect</a></li>
        <li><a href="../../dart-ui/Canvas/drawArc.html">drawArc</a></li>
        <li><a href="../../dart-ui/Canvas/drawAtlas.html">drawAtlas</a></li>
        <li><a href="../../dart-ui/Canvas/drawCircle.html">drawCircle</a></li>
        <li><a href="../../dart-ui/Canvas/drawColor.html">drawColor</a></li>
        <li><a href="../../dart-ui/Canvas/drawDRRect.html">drawDRRect</a></li>
        <li><a href="../../dart-ui/Canvas/drawImage.html">drawImage</a></li>
        <li><a href="../../dart-ui/Canvas/drawImageNine.html">drawImageNine</a></li>
        <li><a href="../../dart-ui/Canvas/drawImageRect.html">drawImageRect</a></li>
        <li><a href="../../dart-ui/Canvas/drawLine.html">drawLine</a></li>
        <li><a href="../../dart-ui/Canvas/drawOval.html">drawOval</a></li>
        <li><a href="../../dart-ui/Canvas/drawPaint.html">drawPaint</a></li>
        <li><a href="../../dart-ui/Canvas/drawParagraph.html">drawParagraph</a></li>
        <li><a href="../../dart-ui/Canvas/drawPath.html">drawPath</a></li>
        <li><a href="../../dart-ui/Canvas/drawPicture.html">drawPicture</a></li>
        <li><a href="../../dart-ui/Canvas/drawPoints.html">drawPoints</a></li>
        <li><a href="../../dart-ui/Canvas/drawRawAtlas.html">drawRawAtlas</a></li>
        <li><a href="../../dart-ui/Canvas/drawRawPoints.html">drawRawPoints</a></li>
        <li><a href="../../dart-ui/Canvas/drawRect.html">drawRect</a></li>
        <li><a href="../../dart-ui/Canvas/drawRRect.html">drawRRect</a></li>
        <li><a href="../../dart-ui/Canvas/drawShadow.html">drawShadow</a></li>
        <li><a href="../../dart-ui/Canvas/drawVertices.html">drawVertices</a></li>
        <li><a href="../../dart-ui/Canvas/getSaveCount.html">getSaveCount</a></li>
        <li><a href="../../dart-ui/Canvas/restore.html">restore</a></li>
        <li><a href="../../dart-ui/Canvas/rotate.html">rotate</a></li>
        <li><a href="../../dart-ui/Canvas/save.html">save</a></li>
        <li><a href="../../dart-ui/Canvas/saveLayer.html">saveLayer</a></li>
        <li><a href="../../dart-ui/Canvas/scale.html">scale</a></li>
        <li><a href="../../dart-ui/Canvas/skew.html">skew</a></li>
        <li><a href="../../dart-ui/Canvas/transform.html">transform</a></li>
        <li><a href="../../dart-ui/Canvas/translate.html">translate</a></li>
        <li class="inherited"><a href="../../dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
        <li class="inherited"><a href="../../dart-core/Object/toString.html">toString</a></li>
    
        <li class="section-title inherited"><a href="../../dart-ui/Canvas-class.html#operators">Operators</a></li>
        <li class="inherited"><a href="../../dart-core/Object/operator_equals.html">operator ==</a></li>
    
    
    
    
    
    </ol>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
      <div><h1><span class="kind-method">drawAtlas</span> method</h1></div>

    <section class="multi-line-signature">
      <span class="returntype">void</span>
            <span class="name ">drawAtlas</span>
(<wbr><ol class="parameter-list"><li><span class="parameter" id="drawAtlas-param-atlas"><span class="type-annotation"><a href="../../dart-ui/Image-class.html">Image</a></span> <span class="parameter-name">atlas</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-transforms"><span class="type-annotation"><a href="../../dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../dart-ui/RSTransform-class.html">RSTransform</a></span>&gt;</span></span> <span class="parameter-name">transforms</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-rects"><span class="type-annotation"><a href="../../dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../dart-ui/Rect-class.html">Rect</a></span>&gt;</span></span> <span class="parameter-name">rects</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-colors"><span class="type-annotation"><a href="../../dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../dart-ui/Color-class.html">Color</a></span>&gt;</span></span> <span class="parameter-name">colors</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-blendMode"><span class="type-annotation"><a href="../../dart-ui/BlendMode-class.html">BlendMode</a></span> <span class="parameter-name">blendMode</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-cullRect"><span class="type-annotation"><a href="../../dart-ui/Rect-class.html">Rect</a></span> <span class="parameter-name">cullRect</span>, </span></li>
<li><span class="parameter" id="drawAtlas-param-paint"><span class="type-annotation"><a href="../../dart-ui/Paint-class.html">Paint</a></span> <span class="parameter-name">paint</span></span></li>
</ol>)
      
    </section>
    <section class="desc markdown">
      <p>Draws many parts of an image - the <code>atlas</code> - onto the canvas.</p>
<p>This method allows for optimization when you want to draw many parts of an
image onto the canvas, such as when using sprites or zooming. It is more efficient
than using multiple calls to <a href="../../dart-ui/Canvas/drawImageRect.html">drawImageRect</a> and provides more functionality
to individually transform each image part by a separate rotation or scale and
blend or modulate those parts with a solid color.</p>
<p>The method takes a list of <a href="../../dart-ui/Rect-class.html">Rect</a> objects that each define a piece of the
<code>atlas</code> image to be drawn independently. Each <a href="../../dart-ui/Rect-class.html">Rect</a> is associated with an
<a href="../../dart-ui/RSTransform-class.html">RSTransform</a> entry in the <code>transforms</code> list which defines the location,
rotation, and (uniform) scale with which to draw that portion of the image.
Each <a href="../../dart-ui/Rect-class.html">Rect</a> can also be associated with an optional <a href="../../dart-ui/Color-class.html">Color</a> which will be
composed with the associated image part using the <code>blendMode</code> before blending
the result onto the canvas. The full operation can be broken down as:</p>
<ul>
<li>Blend each rectangular portion of the image specified by an entry in the
<code>rects</code> argument with its associated entry in the <code>colors</code> list using the
<code>blendMode</code> argument (if a color is specified). In this part of the operation,
the image part will be considered the source of the operation and the associated
color will be considered the destination.</li>
<li>Blend the result from the first step onto the canvas using the translation,
rotation, and scale properties expressed in the associated entry in the
<code>transforms</code> list using the properties of the <a href="../../dart-ui/Paint-class.html">Paint</a> object.</li>
</ul>
<p>If the first stage of the operation which blends each part of the image with
a color is needed, then both the <code>colors</code> and <code>blendMode</code> arguments must
not be null and there must be an entry in the <code>colors</code> list for each
image part. If that stage is not needed, then the <code>colors</code> argument can
be either null or an empty list and the <code>blendMode</code> argument may also be null.</p>
<p>The optional <code>cullRect</code> argument can provide an estimate of the bounds of the
coordinates rendered by all components of the atlas to be compared against
the clip to quickly reject the operation if it does not intersect.</p>
<p>An example usage to render many sprites from a single sprite atlas with no
rotations or scales:</p>
<pre class="language-dart"><code class="language-dart">class Sprite {
  int index;
  double centerX;
  double centerY;
}

class MyPainter extends CustomPainter {
  // assume spriteAtlas contains N 10x10 sprites side by side in a (N*10)x10 image
  ui.Image spriteAtlas;
  List&lt;Sprite&gt; allSprites;

  @override
  void paint(Canvas canvas, Size size) {
    Paint paint = Paint();
    canvas.drawAtlas(spriteAtlas, &lt;RSTransform&gt;[
      for (Sprite sprite in allSprites)
        RSTransform.fromComponents(
          rotation: 0.0,
          scale: 1.0,
          // Center of the sprite relative to its rect
          anchorX: 5.0,
          anchorY: 5.0,
          // Location at which to draw the center of the sprite
          translateX: sprite.centerX,
          translateY: sprite.centerY,
        ),
    ], &lt;Rect&gt;[
      for (Sprite sprite in allSprites)
        Rect.fromLTWH(sprite.index * 10.0, 0.0, 10.0, 10.0),
    ], null, null, null, paint);
  }

  ...
}
</code></pre>
<p>Another example usage which renders sprites with an optional opacity and rotation:</p>
<pre class="language-dart"><code class="language-dart">class Sprite {
  int index;
  double centerX;
  double centerY;
  int alpha;
  double rotation;
}

class MyPainter extends CustomPainter {
  // assume spriteAtlas contains N 10x10 sprites side by side in a (N*10)x10 image
  ui.Image spriteAtlas;
  List&lt;Sprite&gt; allSprites;

  @override
  void paint(Canvas canvas, Size size) {
    Paint paint = Paint();
    canvas.drawAtlas(spriteAtlas, &lt;RSTransform&gt;[
      for (Sprite sprite in allSprites)
        RSTransform.fromComponents(
          rotation: sprite.rotation,
          scale: 1.0,
          // Center of the sprite relative to its rect
          anchorX: 5.0,
          anchorY: 5.0,
          // Location at which to draw the center of the sprite
          translateX: sprite.centerX,
          translateY: sprite.centerY,
        ),
    ], &lt;Rect&gt;[
      for (Sprite sprite in allSprites)
        Rect.fromLTWH(sprite.index * 10.0, 0.0, 10.0, 10.0),
    ], &lt;Color&gt;[
      for (Sprite sprite in allSprites)
        Color.white.withAlpha(sprite.alpha),
    ], BlendMode.srcIn, null, paint);
  }

  ...
}
</code></pre>
<p>The length of the <code>transforms</code> and <code>rects</code> lists must be equal and
if the <code>colors</code> argument is not null then it must either be empty or
have the same length as the other two lists.</p>
<p>See also:</p>
<ul>
<li><a href="../../dart-ui/Canvas/drawRawAtlas.html">drawRawAtlas</a>, which takes its arguments as typed data lists rather
than objects.</li>
</ul>
    </section>
    
    <section class="summary source-code" id="source">
      <h2><span>Implementation</span></h2>
      <pre class="language-dart"><code class="language-dart">void drawAtlas(Image atlas,
               List&lt;RSTransform&gt; transforms,
               List&lt;Rect&gt; rects,
               List&lt;Color&gt;? colors,
               BlendMode? blendMode,
               Rect? cullRect,
               Paint paint) {
  &#47;&#47; ignore: unnecessary_null_comparison
  assert(atlas != null); &#47;&#47; atlas is checked on the engine side
  assert(transforms != null); &#47;&#47; ignore: unnecessary_null_comparison
  assert(rects != null); &#47;&#47; ignore: unnecessary_null_comparison
  assert(colors == null || colors.isEmpty || blendMode != null);
  assert(paint != null); &#47;&#47; ignore: unnecessary_null_comparison

  final int rectCount = rects.length;
  if (transforms.length != rectCount)
    throw ArgumentError(&#39;&quot;transforms&quot; and &quot;rects&quot; lengths must match.&#39;);
  if (colors != null &amp;&amp; colors.isNotEmpty &amp;&amp; colors.length != rectCount)
    throw ArgumentError(&#39;If non-null, &quot;colors&quot; length must match that of &quot;transforms&quot; and &quot;rects&quot;.&#39;);

  final Float32List rstTransformBuffer = Float32List(rectCount * 4);
  final Float32List rectBuffer = Float32List(rectCount * 4);

  for (int i = 0; i &lt; rectCount; ++i) {
    final int index0 = i * 4;
    final int index1 = index0 + 1;
    final int index2 = index0 + 2;
    final int index3 = index0 + 3;
    final RSTransform rstTransform = transforms[i];
    final Rect rect = rects[i];
    assert(_rectIsValid(rect));
    rstTransformBuffer[index0] = rstTransform.scos;
    rstTransformBuffer[index1] = rstTransform.ssin;
    rstTransformBuffer[index2] = rstTransform.tx;
    rstTransformBuffer[index3] = rstTransform.ty;
    rectBuffer[index0] = rect.left;
    rectBuffer[index1] = rect.top;
    rectBuffer[index2] = rect.right;
    rectBuffer[index3] = rect.bottom;
  }

  final Int32List? colorBuffer = (colors == null || colors.isEmpty) ? null : _encodeColorList(colors);
  final Float32List? cullRectBuffer = cullRect?._value32;

  _drawAtlas(
    paint._objects, paint._data, atlas, rstTransformBuffer, rectBuffer,
    colorBuffer, (blendMode ?? BlendMode.src).index, cullRectBuffer
  );
}</code></pre>
    </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    provinciApp
      1.0.0+1
  </span>

</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../static-assets/typeahead.bundle.min.js"></script>
<script src="../../static-assets/highlight.pack.js"></script>
<script src="../../static-assets/URI.js"></script>
<script src="../../static-assets/script.js"></script>


</body>

</html>
